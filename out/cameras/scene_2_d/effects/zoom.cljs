(ns phzr.cameras.scene-2-d.effects.zoom
  (:require [phzr.impl.utils.core :refer [clj->phaser phaser->clj]]
            [phzr.impl.extend :as ex]
            [cljsjs.phaser])
  (:refer-clojure :exclude [update]))

(defn ->Zoom
  "  Parameters:
    * camera (Phaser.Cameras.Scene2D.Camera) - The camera this effect is acting upon."
  ([camera]
   (js/Phaser.Cameras.Scene2D.Effects.Zoom. (clj->phaser camera))))

(defn destroy
  "Destroys this effect, releasing it from the Camera."
  ([zoom]
   (phaser->clj
    (.destroy zoom))))

(defn effect-complete
  "Called internally when the effect completes."
  ([zoom]
   (phaser->clj
    (.effectComplete zoom))))

(defn reset
  "Resets this camera effect.
  If it was previously running, it stops instantly without calling its onComplete callback or emitting an event."
  ([zoom]
   (phaser->clj
    (.reset zoom))))

(defn start
  "This effect will zoom the Camera to the given scale, over the duration and with the ease specified.

  Parameters:
    * zoom (Phaser.Cameras.Scene2D.Effects.Zoom) - Targeted instance for method
    * zoom (number) - The target Camera zoom value.
    * duration (integer) {optional} - The duration of the effect in milliseconds.
    * ease (string | function) {optional} - The ease to use for the Zoom. Can be any of the Phaser Easing constants or a custom function.
    * force (boolean) {optional} - Force the zoom effect to start immediately, even if already running.
    * callback (Phaser.Types.Cameras.Scene2D.CameraZoomCallback) {optional} - This callback will be invoked every frame for the duration of the effect.
It is sent three arguments: A reference to the camera, a progress amount between 0 and 1 indicating how complete the effect is,
and the current camera zoom value.
    * context (any) {optional} - The context in which the callback is invoked. Defaults to the Scene to which the Camera belongs.

  Returns:  Phaser.Cameras.Scene2D.Camera - The Camera on which the effect was started."
  ([zoom zoom]
   (phaser->clj
    (.start zoom
            (clj->phaser zoom))))
  ([zoom zoom duration]
   (phaser->clj
    (.start zoom
            (clj->phaser zoom)
            (clj->phaser duration))))
  ([zoom zoom duration ease]
   (phaser->clj
    (.start zoom
            (clj->phaser zoom)
            (clj->phaser duration)
            (clj->phaser ease))))
  ([zoom zoom duration ease force]
   (phaser->clj
    (.start zoom
            (clj->phaser zoom)
            (clj->phaser duration)
            (clj->phaser ease)
            (clj->phaser force))))
  ([zoom zoom duration ease force callback]
   (phaser->clj
    (.start zoom
            (clj->phaser zoom)
            (clj->phaser duration)
            (clj->phaser ease)
            (clj->phaser force)
            (clj->phaser callback))))
  ([zoom zoom duration ease force callback context]
   (phaser->clj
    (.start zoom
            (clj->phaser zoom)
            (clj->phaser duration)
            (clj->phaser ease)
            (clj->phaser force)
            (clj->phaser callback)
            (clj->phaser context)))))

(defn update
  "The main update loop for this effect. Called automatically by the Camera.

  Parameters:
    * zoom (Phaser.Cameras.Scene2D.Effects.Zoom) - Targeted instance for method
    * time (integer) - The current timestamp as generated by the Request Animation Frame or SetTimeout.
    * delta (number) - The delta time, in ms, elapsed since the last frame."
  ([zoom time delta]
   (phaser->clj
    (.update zoom
             (clj->phaser time)
             (clj->phaser delta)))))